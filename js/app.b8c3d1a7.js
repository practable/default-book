(function(t){function e(e){for(var n,c,a=e[0],r=e[1],l=e[2],u=0,b=[];u<a.length;u++)c=a[u],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&b.push(s[c][0]),s[c]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);d&&d(e);while(b.length)b.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,a=1;a<o.length;a++){var r=o[a];0!==s[r]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=o[0]))}return t}var n={},s={app:0},i=[];function c(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=t,c.c=n,c.d=function(t,e,o){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(o,n,function(e){return t[e]}.bind(null,n));return o},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var d=r;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("cd49")},4638:function(t,e,o){},4678:function(t,e,o){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=i(t);return o(e)}function i(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="4678"},"6cf8":function(t,e,o){},"96df":function(t,e,o){"use strict";o("4638")},cd49:function(t,e,o){"use strict";o.r(e);var n={};o.r(n),o.d(n,"bearer",(function(){return d})),o.d(n,"bookingToken",(function(){return u})),o.d(n,"bookingTokenValid",(function(){return b})),o.d(n,"loginResult",(function(){return h})),o.d(n,"bookingTokenStatus",(function(){return j})),o.d(n,"bookingTokenExpiresAt",(function(){return p})),o.d(n,"bookingsEnabled",(function(){return f})),o.d(n,"finishedCount",(function(){return g})),o.d(n,"requestsMade",(function(){return m})),o.d(n,"details",(function(){return k})),o.d(n,"finishedBookings",(function(){return O})),o.d(n,"atMaxBookings",(function(){return v})),o.d(n,"getBookingByID",(function(){return y})),o.d(n,"getFinishedByID",(function(){return w})),o.d(n,"getTimeLeftByID",(function(){return x}));var s={};o.r(s),o.d(s,"login",(function(){return T})),o.d(s,"clear",(function(){return S})),o.d(s,"deleteToken",(function(){return B})),o.d(s,"deleteBearer",(function(){return q}));var i={};o.r(i),o.d(i,"deleteBearer",(function(){return D})),o.d(i,"deleteToken",(function(){return z})),o.d(i,"incrementFinishedCount",(function(){return A})),o.d(i,"lastPoolRefresh",(function(){return C})),o.d(i,"login",(function(){return I})),o.d(i,"setToken",(function(){return P})),o.d(i,"setBookingToken",(function(){return $})),o.d(i,"setBookingTokenExpiresAt",(function(){return E})),o.d(i,"clearBookingToken",(function(){return R})),o.d(i,"incrementRequestsMade",(function(){return M})),o.d(i,"setMaxBookings",(function(){return V})),o.d(i,"setStoreDetails",(function(){return F})),o.d(i,"setStoreStatus",(function(){return _})),o.d(i,"setPoolIDs",(function(){return N})),o.d(i,"setPoolIDsStatus",(function(){return L})),o.d(i,"addPoolDescription",(function(){return U})),o.d(i,"clearPoolDescriptions",(function(){return Y})),o.d(i,"setPoolStatus",(function(){return K})),o.d(i,"replaceBookings",(function(){return H})),o.d(i,"clearBookings",(function(){return J})),o.d(i,"setBookingsStatus",(function(){return W})),o.d(i,"setBookingsEnabled",(function(){return G})),o.d(i,"deleteBooking",(function(){return Q}));var c=o("f2bf"),a=o("5502"),r=o("5a0c"),l=o.n(r);const d=t=>t.bearer,u=t=>t.bookingToken,b=t=>t.bookingTokenValid,h=t=>t.loginResult,j=t=>t.bookingTokenStatus,p=t=>t.bookingTokenExpiresAt,f=t=>t.bookingsEnabled,g=t=>t.finishedCount,m=t=>t.requestsMade,k=t=>{var e=[],o=t.lastPoolRefresh;for(const[n,s]of Object.entries(t.poolDescriptions))s.checked>=o&&e.push(s.data);return e},O=t=>t.finishedBookings.length,v=t=>t.activityBookings.length>=t.maxBookings,y=(t,e)=>e=>{var o=t.activityBookings.filter(t=>t.id===e);return o.length<1?{}:o[0].status},w=(t,e)=>e=>{try{return t.finishedBookings[e].exp<=l()().unix()}catch(o){return console.log("error checking if finished",e,o),!1}},x=(t,e)=>e=>{try{return t.finishedBookings[e].exp-l()().unix()}catch(o){return console.log("error checking if finished",e,o),-1}},T=({commit:t})=>{t("login")},S=({commit:t})=>{t("clear")},B=({commit:t})=>{t("deleteToken")},q=({commit:t})=>{t("deleteBearer")},D=t=>{t.bearer=""},z=t=>{t.token=""},A=t=>{t.finishedCount+=1},C=(t,e)=>{t.lastPoolRefresh=e},I=t=>{t.bearer="eykljdflkajsdfjlas.lkasjdfklasjdlkfjalskdf.ksdflkjaskldjflkasdjf"},P=(t,e)=>{t.token=e},$=(t,e)=>{t.bookingToken=e,t.bookingTokenValid=!0,t.bookingTokenStatus="valid",t.bookingTokenExpiresAt=0},E=(t,e)=>{t.bookingTokenExpiresAt=e},R=(t,e)=>{t.bookingToken="",t.bookingTokenValid=!1,t.bookingTokenStatus="empty",t.loginResult=e},M=t=>{t.requestsMade+=1},V=(t,e)=>{t.maxBookings=e},F=(t,e)=>{t.storeStatusDetails=e},_=(t,e)=>{t.storeStatus=e},N=(t,e)=>{t.poolIDs=e},L=(t,e)=>{t.poolIDsStatus=e},U=(t,e)=>{try{var o=e.data.id;t.poolDescriptions[o]=e}catch(n){console.log("error adding pool description",n)}},Y=t=>{console.log("DEPRECATED clearPoolDescriptions"),t.poolDescriptions=[]},K=(t,e)=>{t.poolStatus[e.id]=e},H=(t,e)=>{var o,n=[],s=[];for(o=0;o<e.length;o++){var i=e[o].description.id;n.push({id:i,status:e[o],ok:!0}),s.push(i),t.finishedBookings[i]=e[o]}t.activityBookings=n},J=(t,e)=>{t.activityBookings=[]},W=(t,e)=>{t.bookingsStatus=e},G=(t,e)=>{t.bookingsEnabled=e},Q=(t,e)=>{console.log("want to remove activity id",e.id);var o=t.activityBookings.map((function(t){return t.id})).indexOf(e.id);console.log("removing booking with id",t.activityBookings[o]),t.finishedBookings.push(t.activityBookings[o]),t.activityBookings.splice(o,1)},X={bearer:"",token:"",bookingToken:"",bookingTokenValid:!1,loginResult:"login not attempted",bookingsEnabled:!1,bookingTokenStatus:"empty",bookingTokenExpiresAt:0,maxBookings:0,storeStatus:"unknown",storeStatusDetails:null,poolIDsStatus:"unknown",poolIDs:[],poolDescriptions:{},poolStatus:{},activityBookings:[],finishedBookings:{},requestsMade:0,finishedCount:0,lastPoolRefresh:0},Z=Object(a["a"])({state:X,getters:n,actions:s,mutations:i});var tt=Z;const et=Object(c["h"])("img",{width:"300",src:"https://assets.practable.io/images/common/practable-logo-3-1980x660.png"},null,-1),ot={id:"nav"},nt=Object(c["g"])("Catalogue"),st=Object(c["g"])(" | "),it=Object(c["g"])("About"),ct=Object(c["h"])("p",{style:{"margin-bottom":"0.7cm"}},null,-1);function at(t,e,o,n,s,i){const a=Object(c["x"])("router-link"),r=Object(c["x"])("router-view");return Object(c["q"])(),Object(c["d"])(c["a"],null,[et,Object(c["h"])("div",ot,[Object(c["h"])(a,{to:"/"},{default:Object(c["D"])(()=>[nt]),_:1}),st,Object(c["h"])(a,{to:"/about"},{default:Object(c["D"])(()=>[it]),_:1})]),ct,Object(c["h"])(r)],64)}var rt={name:"App",components:{}};o("d396");rt.render=at;var lt=rt,dt=o("6c02");function ut(t,e){return Object(c["q"])(),Object(c["d"])("h1",null,"Home Page")}const bt={};bt.render=ut;const ht={class:"container-fluid"},jt=Object(c["f"])('<div class="row"><div class="col"></div><div class="col text-justify"><h1>About</h1><p> This is the booking interface for the <a href="https://practable.io">practable.io</a> non-traditional practical work system. </p><h3> For Users </h3><p>The booking system, and the <a href="https://practable.io">practable.io</a> system itself, are under active development. You will notice functional and cosmetic changes over time. These should be largely self-explanatory.</p><p> It&#39;s entirely possible you will find the odd issue, despite our best efforts to eliminate them. A simple page reload, or returning to the original link you received, should fix most of the issues that might crop up. We&#39;d be delighted to hear from you if you have any other issues, or feedback. Just drop us a line at <a href="mailto:support@practable.io">support@practable.io</a> with as much detail as you can manage.</p><h3> For Educators </h3><p> Practable is the core reference implemention of an emerging consensus regarding the role of remote laboratories in on-campus education. Some of the background can be found <a href="https://doi.org/10.1080/23752696.2020.1816845">here</a>.</p><h3> Adopters and Developers</h3><p> If you are a potential adopter or developer of federated remote laboratory technologies, you might be pleasantly surprised to find that all the code and hardware is open-source, for the complete feature set. We will continue to develop the code base in the open. We value the opportunity to create educational software which reflects our values. We hope you do too.</p><p> If you want to take a quick look at the software, you can find the core <a href="https://github.com/timdrysdale/relay">here</a>. Developer and adopter documentation is on our roadmap, as are support tools and services to set you up and/or keep you going / scale up. Alternatively, we can do some or all of the work for you - get in touch to discuss the options without obligation. If you have any questions, want to discuss getting some help, or simply want to let us know you might be interested in participating in the practable ecosystem in some way, let us know by emailing <a href="mailto:admin@practable.io">Tim</a>.</p></div><div class="col"></div></div>',1);function pt(t,e){return Object(c["q"])(),Object(c["d"])("div",ht,[jt])}const ft={};ft.render=pt;var gt=ft;function mt(t,e){return Object(c["q"])(),Object(c["d"])("h1",null,"Oops, it looks like the page you're looking for doesn't exist.")}const kt={};kt.render=mt;var Ot=kt;const vt={class:"container-fluid"},yt=Object(c["h"])("p",{style:{"margin-bottom":"1cm"}},null,-1),wt=Object(c["h"])("p",{style:{"margin-bottom":"1cm"}},null,-1),xt=Object(c["h"])("p",{style:{"margin-bottom":"0.3cm"}},null,-1);function Tt(t,e,o,n,s,i){const a=Object(c["x"])("enterToken"),r=Object(c["x"])("displayBookings"),l=Object(c["x"])("displayPools");return Object(c["q"])(),Object(c["d"])("div",vt,[yt,Object(c["h"])(a),wt,Object(c["h"])(r),xt,Object(c["h"])(l)])}function St(t,e,o,n,s,i){return null}var Bt=o("bc3a"),qt=o.n(Bt),Dt=o("c1df"),zt=o.n(Dt),At=o("1232"),Ct={data(){return{stuff:null,expiresAt:null,loginToken:null,result:"empty"}},computed:{...Object(a["d"])({token:t=>t.token,bearer:t=>t.bookingToken,valid:t=>t.bookingTokenValid})},methods:{updateToken(t){this.$store.commit("setToken",t.target.value)},bookingLogin(t){var e,o;e=this.$localStorage.get("token",!1),o=e?{token:e}:{},qt.a.post("https://prac.io/book/api/v1/login",o,{headers:{Authorization:t}}).then(t=>{this.stuff=t.data,this.expiresAt=t.data.exp,this.loginToken=t.data.token,this.$localStorage.set("token",this.loginToken),this.result=t.statusText,this.$store.commit("setBookingToken",t.data.token),this.$store.commit("setBookingTokenExpiresAt",t.data.exp),this.$store.commit("setPoolIDs",t.data.pools),this.$store.commit("setPoolIDsStatus","checked "+zt()().fromNow())},t=>{t.response?(this.loginToken="",this.result=t.response.statusText):this.result="error",this.$store.commit("clearBookingToken","login failed")})},...Object(a["b"])(["login","deleteToken"])},mounted(){var t="";try{t=String(this.$route.query.c)}catch(e){console.log("using default code because error obtaining code from query param c",e)}"undefined"!=t&&""!=t||(t="everyone"),qt.a.get("https://prac.io/token/"+t,{}).then(t=>{try{Object(At["a"])(t.data);this.bookingLogin(t.data)}catch(e){console.log("could not decode token",e)}},t=>{console.log("error getting login token",t)})}};Ct.render=St;var It=Ct;const Pt={class:"container-fluid"},$t={class:"bg-primary text-left row"},Et={class:"col"},Rt=Object(c["h"])("h3",{class:"text-white"},"Your Bookings",-1),Mt={class:"text-white"},Vt={class:"container-fluid"},Ft={class:"row"};function _t(t,e,o,n,s,i){const a=Object(c["x"])("describe-booking");return Object(c["q"])(),Object(c["d"])("div",Pt,[Object(c["h"])("div",$t,[Object(c["h"])("div",Et,[Rt,Object(c["h"])("h6",Mt,Object(c["z"])(t.status),1)])]),Object(c["h"])("div",Vt,[Object(c["h"])("div",Ft,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.details,(t,e)=>(Object(c["q"])(),Object(c["d"])(a,{description:t,index:e,key:t.id},null,8,["description","index"]))),128))])])])}const Nt={class:"card mb-3",style:{"max-width":"540px"}},Lt={class:"row no-gutters"},Ut={class:"col-md-4"},Yt={class:"col-md-8"},Kt={class:"card-body"},Ht={class:"card-title"},Jt={class:"card-text text-secondary"},Wt={class:"container"},Gt={class:"row"},Qt={class:"col"},Xt={class:"card-text"},Zt={class:"text-muted"},te={class:"col"},ee={class:"dropup"},oe=Object(c["g"])(" Open "),ne=Object(c["h"])("span",{class:"caret"},null,-1);function se(t,e,o,n,s,i){return Object(c["q"])(),Object(c["d"])("div",Nt,[Object(c["h"])("div",Lt,[Object(c["h"])("div",Ut,[Object(c["h"])("img",{src:t.image,class:"card-img",alt:t.title},null,8,["src","alt"])]),Object(c["h"])("div",Yt,[Object(c["h"])("div",Kt,[Object(c["h"])("h5",Ht,Object(c["z"])(t.title),1),Object(c["h"])("p",Jt,Object(c["z"])(t.about),1),Object(c["h"])("div",Wt,[Object(c["h"])("div",Gt,[Object(c["h"])("div",Qt,[Object(c["h"])("p",Xt,[Object(c["h"])("small",Zt,Object(c["z"])(t.status),1)])]),Object(c["h"])("div",te,[Object(c["h"])("div",ee,[Object(c["h"])("button",{type:"button",onClick:e[1]||(e[1]=(...e)=>t.open&&t.open(...e)),class:"btn btn-success",id:"open"},[oe,ne])])])])])])])])])}var ie=o("1157"),ce=o.n(ie),ae={props:["description","key","index"],components:{},computed:{title:function(){return this.description.name},image:function(){return this.description.image},id:function(){return this.description.id},what:function(){return this.description.short},about:function(){return this.description.long},status:function(){var t=this;return setTimeout((function(){t.$store.commit("incrementFinishedCount")}),1e3*(this.description.exp-l()().unix())),"Now until "+l.a.unix(this.description.exp).format("h:mm A")},...Object(a["d"])({bookingTokenValid:t=>t.bookingTokenValid,bookingToken:t=>t.bookingToken,poolStatus:t=>t.poolStatus,details:t=>t.poolDescriptions,ids:t=>t.poolIDs})},methods:{open(){var t="/activity/"+this.id;this.$router.push({path:t})}}};ae.render=se;var re=ae,le={components:{"describe-booking":re},methods:{getStatus(){qt.a.get("https://prac.io/book/api/v1/login",{headers:{Authorization:this.bookingToken}}).then(t=>{var e="";try{t.data.locked?(e="Bookings are currently suspended. "+t.data.msg,this.$store.commit("setBookingsEnabled",!1)):(e=" You can have up to "+t.data.max+" bookings at a time. "+t.data.msg,this.$store.commit("setBookingsEnabled",!0),this.$store.commit("setMaxBookings",t.data.max))}catch(o){e="Booking system status unknown"}this.$store.commit("setBookingsStatus",e),this.$store.commit("replaceBookings",t.data.activities)},()=>{this.$store.commit("setBookingsStatus","No bookings found when checked at "+l()().format("h:mm A"))})}},computed:{details:function(){var t,e;for(t=[],e=0;e<this.fulldetails.length;e++){var o;o=this.fulldetails[e].status.description,o["exp"]=this.fulldetails[e].status.exp,t.push(o)}return t},...Object(a["d"])({bookingTokenValid:t=>t.bookingTokenValid,bookingToken:t=>t.bookingToken,status:t=>t.bookingsStatus,fulldetails:t=>t.activityBookings,ids:t=>t.poolIDs}),...Object(a["c"])(["atMaxBookings","requestsMade","finishedCount"])},watch:{bookingToken(){this.bookingTokenValid&&this.getStatus()},requestsMade(){this.getStatus(),setTimeout(this.getStatus,2e3)},finishedCount(){setTimeout(this.getStatus,1500)}}};le.render=_t;var de=le;const ue={class:"container-fluid"},be={class:"bg-secondary row mb-2"},he={class:"col"},je=Object(c["h"])("h3",{class:"text-white text-left"},"Your Catalogue",-1),pe={class:"text-white text-left"},fe=Object(c["h"])("div",{class:"col"},null,-1),ge=Object(c["h"])("div",{class:"col"},null,-1),me={class:"row"},ke={class:"row"};function Oe(t,e,o,n,s,i){const a=Object(c["x"])("describe-pool");return Object(c["q"])(),Object(c["d"])("div",ue,[Object(c["h"])("div",be,[Object(c["h"])("div",he,[je,Object(c["h"])("h6",pe,[t.disableRefresh?Object(c["e"])("",!0):(Object(c["q"])(),Object(c["d"])("button",{key:0,class:"btn btn-light",onClick:e[1]||(e[1]=e=>t.getStatus()),disabled:t.disableRefresh},"refresh",8,["disabled"])),Object(c["g"])(" "+Object(c["z"])(t.status),1)])]),fe,ge]),Object(c["h"])("div",me,[Object(c["E"])(Object(c["h"])("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.poolFilter=e),placeholder:"filter..."},null,512),[[c["B"],t.poolFilter]])]),Object(c["h"])("div",ke,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.filteredDetails,(e,o)=>(Object(c["q"])(),Object(c["d"])(a,{description:e,index:o,key:e.id,enabled:t.canBook},null,8,["description","index","enabled"]))),128))])])}const ve={class:"card mb-3",style:{"max-width":"540px"}},ye={class:"row no-gutters"},we={class:"col-md-4"},xe={class:"col-md-8"},Te={class:"card-body"},Se={class:"card-title"},Be={class:"card-text text-secondary"},qe={key:0,class:"container"},De={class:"row"},ze={class:"col"},Ae={class:"card-text"},Ce={class:"text-muted"},Ie={class:"col"},Pe={class:"dropup"},$e=Object(c["g"])(" Request "),Ee=Object(c["h"])("span",{class:"caret"},null,-1),Re={class:"dropdown-menu",role:"menu","aria-labelledby":"menu1"},Me=Object(c["h"])("a",{role:"menuitem",href:"#",id:"btn2"},"Now for 60 min",-1),Ve=Object(c["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 30 min",-1),Fe=Object(c["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 10 min",-1),_e=Object(c["h"])("a",{role:"menuitem",href:"#",id:"btn3"},"Now for 5 min",-1),Ne={key:1,class:"container"},Le={key:0,class:"row bg-success"},Ue={class:"col text-white text-center align-middle"},Ye={key:1,class:"row bg-danger"},Ke={class:"col text-white text-center align-middle"};function He(t,e,o,n,s,i){return Object(c["q"])(),Object(c["d"])("div",ve,[Object(c["h"])("div",ye,[Object(c["h"])("div",we,[Object(c["h"])("img",{src:t.image,class:"card-img",alt:t.title},null,8,["src","alt"])]),Object(c["h"])("div",xe,[Object(c["h"])("div",Te,[Object(c["h"])("h5",Se,Object(c["z"])(t.title),1),Object(c["h"])("p",Be,Object(c["z"])(t.what),1),t.bookingAttempted?Object(c["e"])("",!0):(Object(c["q"])(),Object(c["d"])("div",qe,[Object(c["h"])("div",De,[Object(c["h"])("div",ze,[Object(c["h"])("p",Ae,[Object(c["h"])("small",Ce,Object(c["z"])(t.status),1)])]),Object(c["h"])("div",Ie,[Object(c["h"])("div",Pe,[Object(c["h"])("button",{type:"button",class:"btn btn-primary dropdown-toggle",id:"requestmenu","data-toggle":"dropdown",disabled:!t.enabled},[$e,Ee],8,["disabled"]),Object(c["h"])("ul",Re,[Object(c["h"])("li",{onClick:e[1]||(e[1]=e=>t.request(60)),role:"presentation"},[Me]),Object(c["h"])("li",{onClick:e[2]||(e[2]=e=>t.request(30)),role:"presentation"},[Ve]),Object(c["h"])("li",{onClick:e[3]||(e[3]=e=>t.request(10)),role:"presentation"},[Fe]),Object(c["h"])("li",{onClick:e[4]||(e[4]=e=>t.request(5)),role:"presentation"},[_e])])])])])])),t.bookingAttempted?(Object(c["q"])(),Object(c["d"])("div",Ne,[t.bookingOK?(Object(c["q"])(),Object(c["d"])("div",Le,[Object(c["h"])("div",Ue,Object(c["z"])(t.result),1),Object(c["h"])("span",{onClick:e[5]||(e[5]=e=>t.closeResult()),class:"close-button topright"},"×")])):Object(c["e"])("",!0),t.bookingOK?Object(c["e"])("",!0):(Object(c["q"])(),Object(c["d"])("div",Ye,[Object(c["h"])("div",Ke,Object(c["z"])(t.result),1),Object(c["h"])("span",{onClick:e[6]||(e[6]=e=>t.closeResult()),class:"close-button topright"},"×")]))])):Object(c["e"])("",!0)])])])])}var Je={props:["description","key","index","enabled"],data(){return{bookingAttempted:!1,bookingOK:!1,result:"No booking attempted"}},components:{},computed:{title:function(){return this.description.name},image:function(){return this.description.image},what:function(){return this.description.short},about:function(){return this.description.long},status:function(){var t=this.poolStatus[this.description.id];if(ce.a.isEmptyObject(t))return"Status unavailable";if(!t.ok)return"Status unavailable";if(0==t.status.available){var e="Unavailable";return t.status.later&&(e="Available again soon"),t.status.used&&(e=e+" ("+t.status.used+"/"+t.status.used+" in use)"),e}var o=0;t.status.used&&(o=t.status.used);var n=o+t.status.available;return"Available now: "+t.status.available+"/"+n},...Object(a["d"])({bookingTokenValid:t=>t.bookingTokenValid,bookingToken:t=>t.bookingToken,poolStatus:t=>t.poolStatus,details:t=>t.poolDescriptions,ids:t=>t.poolIDs})},methods:{closeResult(){this.bookingAttempted=!1},request(t){var e=this.description.id,o=60*t;qt.a.post("https://prac.io/book/api/v1/pools/"+e+"/sessions?duration="+o,{},{headers:{Authorization:this.bookingToken}}).then(()=>{this.bookingAttempted=!0,this.bookingOK=!0,this.result='OK - click on activity in "Your Bookings" to start'},t=>{this.bookingAttempted=!0,this.bookingOK=!1;var e="Sorry: ";t.response?e+=t.response.data:e+="this pool is not currently available",this.result=e,console.log(e)}),this.$store.commit("incrementRequestsMade"),this.getStatus()},getStatus(){var t=this.description.id;qt.a.get("https://prac.io/book/api/v1/pools/"+t+"/status",{headers:{Authorization:this.bookingToken}}).then(e=>{this.$store.commit("setPoolStatus",{id:t,status:e.data,ok:!0})},e=>{this.$store.commit("setPoolStatus",{id:t,status:e,ok:!1})})}},created(){this.getStatus()}};o("96df");Je.render=He;var We=Je,Ge={components:{"describe-pool":We},data(){return{poolFilter:"",disableRefresh:!0}},methods:{enableRefresh(){this.disableRefresh=!1},getStatus(){var t;for(this.disableRefresh=!0,setTimeout(this.enableRefresh,6e4),this.$store.commit("lastPoolRefresh",l()().unix()),t=0;t<this.ids.length;t++)qt.a.get("https://prac.io/book/api/v1/pools/"+this.ids[t],{headers:{Authorization:this.bookingToken}}).then(t=>{this.$store.commit("setPoolIDsStatus","Checked at "+l()().format("h:mm A")),this.$store.commit("addPoolDescription",{checked:l()().unix(),data:t.data})},t=>{this.$store.commit("setPoolIDsStatus","Last check failed at "+l()().format("h:mm A"))})}},computed:{canBook(){return this.bookingsEnabled&&!this.atMaxBookings},filteredDetails(){var t=this.poolFilter.toLowerCase(),e=this.details;if(e.sort((t,e)=>t.name>e.name?1:-1),""==t)return e;var o=e.filter(e=>e.name.toLowerCase().includes(t));return o},...Object(a["d"])({bookingTokenValid:t=>t.bookingTokenValid,bookingToken:t=>t.bookingToken,status:t=>t.poolIDsStatus,ids:t=>t.poolIDs}),...Object(a["c"])(["bookingsEnabled","atMaxBookings","finishedCount","details"])},watch:{bookingToken(t,e){this.bookingTokenValid&&this.getStatus()},finishedCount(t,e){console.log("Finished Booking"),this.getStatus()}}};Ge.render=Oe;var Qe=Ge,Xe={name:"Login",components:{enterToken:It,displayPools:Qe,displayBookings:de}};Xe.render=Tt;var Ze=Xe;const to=Object(c["h"])("h3",null,"Modal",-1),eo=Object(c["h"])("div",null," hello ",-1),oo=Object(c["h"])("p",{style:{"margin-bottom":"3cm"}},null,-1);function no(t,e,o,n,s,i){const a=Object(c["x"])("Test"),r=Object(c["x"])("Vue3FormComponent");return Object(c["q"])(),Object(c["d"])("div",null,[to,eo,Object(c["h"])(a),oo,Object(c["h"])(r)])}const so={key:0},io=Object(c["g"])(" Do you agree? ");function co(t,e,o,n,s,i){return Object(c["q"])(),Object(c["d"])("div",null,[Object(c["h"])("button",{onClick:e[1]||(e[1]=(...e)=>t.show&&t.show(...e))},"Show modal"),t.visible?(Object(c["q"])(),Object(c["d"])("div",so,[io,Object(c["h"])("button",{onClick:e[2]||(e[2]=e=>t.tell("agree"))},"I Agree"),Object(c["h"])("button",{onClick:e[3]||(e[3]=e=>t.tell("decline"))},"I Decline")])):Object(c["e"])("",!0),Object(c["h"])("span",null,"Result: "+Object(c["z"])(t.result),1)])}function ao(){let t=()=>{};const e=Object(c["u"])(!1),o=()=>(e.value=!0,new Promise(e=>{t=e})),n=o=>{e.value=!1,t(o)};return{visible:Object(c["t"])(e),ask:o,tell:n}}var ro=Object(c["i"])({name:"Test",setup(){const{visible:t,ask:e,tell:o}=ao();let n=Object(c["u"])("");const s=async()=>{console.log("awaiting user"),n.value=await e()};return{show:s,visible:t,tell:o,result:n}}});ro.render=co;var lo=ro;const uo=Object(c["h"])("button",{type:"submit"},"Submit",-1),bo=Object(c["g"])(" Do you agree? ");function ho(t,e,o,n,s,i){const a=Object(c["x"])("base-modal");return Object(c["q"])(),Object(c["d"])("form",{onSubmit:e[3]||(e[3]=Object(c["F"])((...e)=>t.handleSubmit&&t.handleSubmit(...e),["prevent"]))},[uo,Object(c["h"])(a,{visible:t.visible},{default:Object(c["D"])(()=>[bo]),actions:Object(c["D"])(()=>[Object(c["h"])("button",{onClick:e[1]||(e[1]=e=>t.tell(!0))},"I Agree"),Object(c["h"])("button",{onClick:e[2]||(e[2]=e=>t.tell(!1))},"I Decline")]),_:1},8,["visible"])],32)}const jo={key:0},po=Object(c["g"])(" Are you sure that you want to do something potentially dangerous? ");function fo(t,e,o,n,s,i){return t.visible?(Object(c["q"])(),Object(c["d"])("div",jo,[Object(c["w"])(t.$slots,"default",{},()=>[po]),Object(c["w"])(t.$slots,"actions",{},()=>[Object(c["h"])("button",{onClick:e[1]||(e[1]=Object(c["F"])(e=>t.$emit("confirmation",!0),["prevent"]))},"Proceed")])])):Object(c["e"])("",!0)}var go=Object(c["i"])({name:"BaseModal",props:["visible"]});go.render=fo;var mo=go,ko=Object(c["i"])({name:"Vue3FormComponent",components:{BaseModal:mo},setup(){console.log("confirmationModal:setup");const{visible:t,ask:e,tell:o}=ao(),n=Object(c["s"])({title:"hello world"}),s=async()=>{console.log("Awaiting modal thing...."),console.log("vis?",t);const o=await e();o?console.log("CHOICE YES"):console.log("CHOICE NO")};return{form:n,handleSubmit:s,visible:t,tell:o}}});ko.render=ho;var Oo=ko,vo={name:"Modal",components:{Test:lo,Vue3FormComponent:Oo}};vo.render=no;var yo=vo;const wo={class:"container-fluid"},xo={class:"row"};function To(t,e,o,n,s,i){const a=Object(c["x"])("launch-activity");return Object(c["q"])(),Object(c["d"])("div",wo,[Object(c["h"])("div",xo,[Object(c["h"])(a,{id:t.id,setTimer:t.setTimer},null,8,["id","setTimer"])])])}const So={class:"container-fluid"},Bo=Object(c["h"])("div",{class:"row"},[Object(c["h"])("div",{class:"col bg-secondary"},[Object(c["h"])("h3",{class:"text-white text-left"}," Your hardware ")])],-1),qo={class:"row"},Do=Object(c["h"])("div",{class:"row"},[Object(c["h"])("div",{class:"col bg-primary"},[Object(c["h"])("h3",{class:"text-white text-left"}," Choose your interface"),Object(c["h"])("h6",{class:"text-white text-left"}," You can come back here to change interfaces as often as you like")])],-1),zo={key:0,class:"row"};function Ao(t,e,o,n,s,i){const a=Object(c["x"])("describe-activity"),r=Object(c["x"])("describe-ui");return Object(c["q"])(),Object(c["d"])("div",So,[Bo,Object(c["h"])("div",qo,[t.dataloaded?(Object(c["q"])(),Object(c["d"])(a,{key:0,id:t.id,booking:t.booking},null,8,["id","booking"])):Object(c["e"])("",!0)]),Do,t.dataloaded?(Object(c["q"])(),Object(c["d"])("div",zo,[(Object(c["q"])(!0),Object(c["d"])(c["a"],null,Object(c["v"])(t.userinterfaces,(e,o)=>(Object(c["q"])(),Object(c["d"])(r,{ui:e,config:t.config,streams:t.streams,exp:t.exp,index:o,key:e.id},null,8,["ui","config","streams","exp","index"]))),128))])):Object(c["e"])("",!0)])}const Co={class:"row no-gutters"},Io={class:"col-md-4"},Po={class:"col-md-8"},$o={class:"card-body"},Eo={class:"card-title"},Ro={class:"card-text"},Mo={class:"container"},Vo={class:"row"},Fo={class:"col"},_o={class:"card-text"},No={class:"text-muted"};function Lo(t,e,o,n,s,i){return t.dataloaded?(Object(c["q"])(),Object(c["d"])("div",{class:"card mb-3",style:{"max-width":"540px"},key:t.id},[Object(c["h"])("div",Co,[Object(c["h"])("div",Io,[Object(c["h"])("img",{src:t.image,class:"card-img",alt:t.title},null,8,["src","alt"])]),Object(c["h"])("div",Po,[Object(c["h"])("div",$o,[Object(c["h"])("h5",Eo,Object(c["z"])(t.title),1),Object(c["h"])("p",Ro,Object(c["z"])(t.about),1),Object(c["h"])("div",Mo,[Object(c["h"])("div",Vo,[Object(c["h"])("div",Fo,[Object(c["h"])("p",_o,[Object(c["h"])("small",No,Object(c["z"])(t.status),1)])])])])])])])])):Object(c["e"])("",!0)}var Uo={props:["booking","id"],computed:{title:function(){return this.booking.hasOwnProperty("description")?this.booking.description.name:""},image:function(){return this.booking.hasOwnProperty("description")?this.booking.description.image:""},what:function(){return this.booking.hasOwnProperty("description")?this.booking.description.short:""},about:function(){return this.booking.hasOwnProperty("description")?this.booking.description.long:""},status:function(){return"Now until "+l.a.unix(this.booking.exp).format("h:mm A")},dataloaded:function(){return this.booking!={}},...Object(a["c"])(["getBookingByID"])}};Uo.render=Lo;var Yo=Uo;const Ko={class:"card mb-3",style:{"max-width":"540px"}},Ho={class:"row no-gutters"},Jo={class:"col-md-4"},Wo={class:"col-md-8"},Go={class:"card-body"},Qo={class:"card-title"},Xo={class:"card-text text-secondary"},Zo={class:"container"},tn={class:"row"},en=Object(c["h"])("div",{class:"col"},null,-1),on={class:"col"},nn={class:"dropup"},sn=Object(c["g"])(" Use now "),cn=Object(c["h"])("span",{class:"caret"},null,-1);function an(t,e,o,n,s,i){return Object(c["q"])(),Object(c["d"])("div",Ko,[Object(c["h"])("div",Ho,[Object(c["h"])("div",Jo,[Object(c["h"])("img",{src:t.image,class:"card-img",alt:t.title},null,8,["src","alt"])]),Object(c["h"])("div",Wo,[Object(c["h"])("div",Go,[Object(c["h"])("h5",Qo,Object(c["z"])(t.title),1),Object(c["h"])("p",Xo,Object(c["z"])(t.what),1),Object(c["h"])("div",Zo,[Object(c["h"])("div",tn,[en,Object(c["h"])("div",on,[Object(c["h"])("div",nn,[Object(c["h"])("button",{type:"button",onClick:e[1]||(e[1]=(...e)=>t.open&&t.open(...e)),class:"btn btn-success",id:"open"},[sn,cn])])])])])])])])])}var rn=o("9dbb"),ln=o.n(rn),dn={props:["config","exp","streams","ui"],components:{},computed:{title:function(){return this.ui.description.name},image:function(){return this.ui.description.image},what:function(){return this.ui.description.short},about:function(){return this.ui.description.long},...Object(a["d"])({bookingTokenValid:t=>t.bookingTokenValid,bookingToken:t=>t.bookingToken,poolStatus:t=>t.poolStatus,details:t=>t.poolDescriptions,ids:t=>t.poolIDs})},methods:{open(){var t,e,o,n,s=this.ui.url,i=this.config,c=this.exp;try{t=JSON.stringify(this.streams)}catch(a){return console.log(a,"could not stringify streams - try without!"),o=ln.a.render(s,{streams:"",exp:c}),void window.open(o,"_blank")}try{e=encodeURIComponent(t),n=encodeURIComponent(i.url)}catch(a){return console.log(a,"could not uriEncode streams or config - try without encoding!"),o=ln.a.render(s,{config:i.url,streams:t,exp:c}),void window.open(o,"_blank")}try{o=ln.a.render(s,{config:n,streams:e,exp:c})}catch(a){return console.log("error rendering uri, try unrendered version",a),void window.open(s,"_blank")}window.open(o,"_blank")}}};dn.render=an;var un=dn,bn={props:["id","setTimer"],components:{"describe-activity":Yo,"describe-ui":un},computed:{userinterfaces:function(){return this.booking.uis},config:function(){return this.booking.config},streams:function(){return this.booking.streams},exp:function(){return this.booking.exp},dataloaded:function(){return this.booking!={}},booking:function(){var t=this.id;return this.getBookingByID(t)},...Object(a["c"])(["getBookingByID"])},methods:{open(){console.log("opening ui page for  ",this.description.id)}}};bn.render=Ao;var hn=bn,jn={name:"Activity",components:{"launch-activity":hn},data(){return{timerSet:!1}},computed:{id:function(){return this.$route.params.id},setTimer:function(){var t=this.id;if(!t)return!1;var e=this.getTimeLeftByID(t);return e>0&&!this.timerSet?(console.log("setting Timer for ",e),setTimeout(this.goBack,1e3*e),this.timerSet=!0,!0):this.timerSet},...Object(a["c"])(["getTimeLeftByID"])},methods:{goBack(){console.log("going back"),this.$router.back()}},watch:{$route(t,e){console.log("Activity:",t,e)}}};jn.render=To;var pn=jn;const fn=[{path:"/",name:"Home",component:Ze},{path:"/about",name:"About",component:gt},{path:"/login",name:"Login",component:Ze},{path:"/modal",name:"Modal",component:yo},{path:"/activity/:id",name:"Activity",component:pn},{path:"/:catchAll(.*)",component:Ot}],gn=Object(dt["a"])({history:Object(dt["b"])(),routes:fn});function mn(t){return!!Object.keys(t.query).length}gn.beforeEach((t,e,o)=>{!mn(t)&&mn(e)?o({...t,query:e.query}):o()});var kn=gn,On=o("2510");o("4989"),o("ab8b");const vn=Object(c["c"])(lt);vn.use(tt).use(kn).use(On["a"]),vn.mount("#app")},d396:function(t,e,o){"use strict";o("6cf8")}});
//# sourceMappingURL=app.b8c3d1a7.js.map